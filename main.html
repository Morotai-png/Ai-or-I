<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI or I</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zalando+Sans+Expanded:ital,wght@0,200..900;1,200..900&display=swap');

        /* Tailwind CSS Configuration for custom colors */
        .tailwind-config {
            display: none; /* Hide this div */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: { 
                    colors: {
                        'black': '#000000',
                        'white': '#FFFFFF',
                        'aqua': '#00F2F2',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            background: linear-gradient(#000000,rgb(5, 157, 157));
            background-color: black;
            display: flex;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }
        .screen-container {
            background: linear-gradient(#000000, #00F2F2);
            justify-content: center;
            align-items: center;
            border-radius: 16px;
            max-width:850px;
            width: 100%;
            padding: 32px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: relative;
        }
        .hidden-screen {
            display: none !important;
        }

        /* Specific Screen styles */
        #landingpage, #difficulty-selection-page, #game-page, #results-page {
            min-height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            gap:24px;
            box-sizing: border-box;
            padding-top: 20px;
            padding-bottom: 20px;
            position: relative;
        }

        #landing-page h4 {
            font-family:'Courier New', Courier, monospace;
            font-size: 1.25rem;
            font-weight: 500;
            text-align:center;
            color:teal;
        }
        #landing-page h1 {
            font-family: 'Zalando Sans Expanded', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            text-align:center;
            color: aqua
        }

        #landing-page p {
            font-size: 1.2rem;
            color:white;
            text-align:center;
            margin-bottom: 20px; 
        }
        #landing-page .acknowledgement-text {
            font-size: 1.1rem;
            font-style: italic;
            color: gray;
            line-height: 1.6;
            max-width: 60%;
            text-align:center;
            margin-bottom: 30px;
        }

        .start-button {
            background-color: #000000; 
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-family:'Courier New', Courier, monospace;
            font-weight: 700;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .start-button:hover {
            background-color: rgb(27, 54, 54); /* Slightly lighter black */
            transform: translateY(-2px);
        }
        
        /* Difficutly Selection Page */
        #difficulty-selection-page h2 {
            font-size: 2rem;
            font-weight: 600;
            color: #1A1A1A; 
            margin-bottom: 30px;
        }

        .difficulty-selection-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 700px;
        }
        .difficulty-select-button {
            background-color: aqua; 
            color: white;
            padding: 20px 15px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(198, 146, 20, 0.2);
            border: none;
            font-size: 1.05rem;
            text-align: center;
        }
        .difficulty-select-button:hover {
            background-color: teal; /* Darker ANU Gold */
            transform: translateY(-2px);
        }

        /* Tinder game page */
        #game-page .game-title {
            font-size: 3rem; /* Larger title for the game page */
            font-weight: 700;
            color: #1A1A1A; 
            margin-bottom: 20px;
        } 

        .profile-box {
            background-color: aqua; 
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 16px;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 1.1rem;
            color: #1A1A1A; 
            line-height: 1.6;
            transition: background-color 0.5s ease; /* Smooth transition for color change */
        }

        .profile-box h3 { /* Style for the "Part X" heading */
            font-size: 1.2rem;
            font-weight: 600;
            color: #1A1A1A;
            margin-bottom: 8px;
        }

        .c-button {
            background-color: aqua; /* Blue background */
            color: black;
            padding: 12px 18px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 10px teal;
            border: none;
            flex-grow: 1;
            min-width: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 0.95rem;
        }

        .c-button:hover { 
            background-color: #333333; /* Slightly lighter black */
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        .c-button:disabled {
        background-color: #9CA3AF;
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            justify-content: center;
            width: 100%; 
        }

        @media (max-width: 768px) {
            .button-grid {
                grid-template-columns: 8ch auto;
            }
        }
        @media (max-width: 480px) {
            .button-grid {
                grid-template-columns: 1fr;
            }
        }

        .game-control-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
            width: 100%; /* Ensure it takes full width */
        }
        .game-control-buttons button {
            background-color: #000000; 
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
            flex-grow: 1;
            min-width: 150px;
        }
        .game-control-buttons button:hover {
            background-color: #333333; /* Darker black */
        }
        .game-control-buttons button.restart-scenario-button {
            background-color: #DC2626; /* Red for restart */
        }
        .game-control-buttons button.restart-scenario-button:hover {
            background-color: #B91C1C; /* Darker Red */
        }
        .game-control-buttons button.continue-button-gold {
            background-color: #C69214; /* ANU Gold for continue */
        }
        .game-control-buttons button.continue-button-gold:hover {
            background-color: #A87E12; /* Darker ANU Gold */
        }

        .action-area {
            display: flex;
            flex-direction: column;
            gap: 16px;
            align-items: center;
            margin-top: 16px; 
            width: 100%;
        }

        /* Menu button */
        .menu-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: #000000; /* ANU Black */
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
            z-index: 50;
        }
        .menu-button:hover {
            background-color: #333333; /* Darker ANU Black */
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }
        .modal-content {
            background-color: #FFFFFF; /* ANU White */
            margin: auto;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
            position: relative;
            text-align: left;
            color: #1A1A1A; /* ANU Black */
            line-height: 1.6;
        }
        .modal-content h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1A1A1A; /* ANU Black */
        }
        .modal-content p {
            margin-bottom: 10px;
        }
        .close-button {
            color: #1A1A1A; /* ANU Black */
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .close-button:hover,
        .close-button:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }
        .loading-spinner {
            border: 4px solid #F4F4F4; /* ANU Beige */
            border-top: 4px solid #000000; /* ANU Black */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .menu-list {
            list-style: none;
            padding: 0;
            margin-bottom: 20px;
        }
        .menu-list li {
            margin-bottom: 10px;
        }
        .menu-list a {
            color: #1A1A1A; /* ANU Black */
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }
        .menu-list a:hover {
            color: #333333;
        }
        .menu-section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-top: 20px;
            margin-bottom: 10px;
            color: #1A1A1A; /* ANU Black */
            border-bottom: 1px solid #F4F4F4; /* ANU Beige border */
            padding-bottom: 5px;
        }

        /* Mobile Responsiveness */ 
        @media (max-width: 640px) {
            .screen-container {
                padding: 20px;
                gap: 12px;
            }
            #landing-page, #difficulty-selection-page, #game-page, #results-page {
                min-height: 80vh; /* Adjust for smaller screens if 100vh is too much */
                padding-top: 15px;
                padding-bottom: 15px;
            }

            .profile-box {
                font-size: 0.95rem;
                padding: 16px;
            }

            .c-button {
                padding: 10px 15px;
                font-size: 0.85rem;
                min-width: unset;
                width: 100%;
            }
            .button-grid {
                grid-template-columns: 1fr;
            }
            .modal-content {
                padding: 20px;
            }
            .modal-content h3 {
                font-size: 1.2rem;
            }
            .menu-button {
                top: 10px;
                left: 10px;
                padding: 8px 12px;
                font-size: 0.8rem;
            }

            .game-control-buttons {
                flex-direction: column;
                gap: 10px;
            }
            .game-control-buttons button {
                width: 100%;
            }
    
            #landing-page h4 { font-size: 1rem; }
            #landing-page h1 { font-size: 2.2rem; }
            #landing-page p { font-size: 0.9rem; }
            #landing-page .acknowledgement-text { font-size: 0.8rem; }
            #difficulty-selection-page h2 { font-size: 1.3rem; }
            .difficulty-selection-grid {
                grid-template-columns: 1fr;
            }
            .difficulty-select-button {
                padding: 12px 10px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="screen container">
        <div id="landing-page">
            <button id="menu-button-landing" class="menu-button">Menu</button>
            <div id="top-of-page" class="flex flex-col items-center">
                <h4 class="text x1 font-medium text-gray-700">ANU Inclusive and Respectful Communities</h4>
                <h1 class="font-mono">AI or I</h1>
            </div>
            <p>Interactive Media Literacy tool.</p>
            <p class="acknowledgement-text">"The Australian National University acknowledges, celebrates and pays our respects to the Ngunnawal and Ngambri people of the Canberra region and to all First Nations Australians on whose traditional lands we meet and work, and whose cultures are among the oldest continuing cultures in human history."</p>
            <button id="start-game-button" class="start-button">Start</button>
        </div>
        
        <div id="difficulty-selection-page" class="hidden-screen">
            <button id="menu-button-selection" class="menu-button">Menu</button>
            <h2>Choose difficulty:</h2>
            <div class="difficulty-selection-grid">
                <button class="difficulty-select-button" data-start-game="easy">Easy (30 profiles in 2 minutes) </button>
                <button class="difficulty-select-button" data-start-game="medium">Medium (30 profiles in 1 minute) </button>
                <button class="difficulty-select-button" data-start-game="hard">Hard (30 profiles in 30 seconds) </button>
            </div>
        </div>

        <div id="game-page" class="hidden-screen">
            <button id="menu-button-game" class="menu-button">Menu</button>

            <h1 id="game-page-title" class="game-title"></h1>

            <div id="profile-display" class="profile-box">
                <h3 id="profile-name"></h3>
                <p id="scenario-description"></p>
            </div>

            <div class="action-area">
                <div class="button-grid" id="action-buttons">
                    <button class="c-button" data-action="Like">
                    </button>
                    <button class="c-button" data-action="Dislike">
                    </button>
                </div>
                <div class="game-control-buttons">
                <button id="reflect-outcome-button" class="llm-button">âœ¨ Reflect on Outcome</button>
                <button id="restart-scenario-button" class="restart-scenario-button" style="display: none;">Restart This Scenario</button>
                <button id="continue-button" class="continue-button-gold" style="display: none;">See What Happens Next</button>
            </div>
            </div>
        </div>

    <div id="menuModal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-modal-target="menuModal">&times;</span>
            <h3>Game Menu</h3>

            <h4 class="menu-section-title">Navigation</h4>
            <ul data-section="navigation" class="menu-list">
                </ul>

            <h4 class="menu-section-title">Choose difficulty</h4>
            <ul id="difficulty-list" class="menu-list">
                </ul>

            <h4 class="menu-section-title">Support & Reporting</h4>
            <ul class="menu-list">
                <li><a href="https://www.anu.edu.au/students/health-safety-wellbeing/student-support" target="_blank" rel="noopener noreferrer">ANU Student Support Services</a></li>
                <li><a href="https://www.anu.edu.au/students/health-safety-wellbeing/counselling" target="_blank" rel="noopener noreferrer">ANU Counselling Centre</a></li>
                <li><a href="https://www.anu.edu.au/about/governance/committees/equity-and-diversity-committee" target="_blank" rel="noopener noreferrer">ANU Equity & Diversity Office</a></li>
                <li><a href="https://anu-advocate.symplicity.com/sash_report/index.php/pid715548?" target="_blank" rel="noopener noreferrer">Harmful Disclosure Tool</a></li>
                <li><a href="https://www.lifeline.org.au/" target="_blank" rel="noopener noreferrer">Lifeline (Australia) - 13 11 14</a></li>
            </ul>
        </div>
    </div>
    
    <audio id="hoverSound" src="https://assets.mixkit.co/sfx/preview/mixkit-game-bling-2000.mp3" preload="auto"></audio>
    <audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-software-interface-click-1869.mp3" preload="auto"></audio>

    <script>

        // Game state variables
        let currentGameId = null;
        let gameActive = false;
        
        // DOM Elements
        const landingPage = document.getElementById('landing-page');
        const difficultySelectionPage = document.getElementById('difficulty-selection-page');
        const gamePage = document.getElementById('game-page');
        const resultsPage = documents.getElementById('results-page');

        const startGameButton = document.getElementById('start-button');
        const difficultySelectButtons = document.querySelectorAll('.difficulty-select-button');

        const gamePageTitle = document.getElementById('game-page-title');
        const profileName = document.getElementById('profile-name');
        const profileDescription = document.getElementById('profile-description')
        const profileBox = document.getElementById('profile-display');

        // Menu elements
        const menuButtonLanding = document.getElementById('menu-button-landing');
        const menuButtonSelection = document.getElementById('menu-button-selection');
        const menuButtonGame = document.getElementById('menu-button-game');
        const menuModal = document.getElementById('menuModal');
        const menuModalCloseButton = menuModal.querySelector('.close-button');
        const scenarioList = document.getElementById('scenario-list');
        const menuNavList = menuModal.querySelector('.menu-list[data-section="navigation"]'); // Get the navigation list

        // Audio elements
        const hoverSound = document.getElementById('hoverSound');
        const clickSound = document.getElementById('clickSound');


        function showScreen(screenId) {
            const screens = [landingPage, difficultySelectionPage, gamePage, resultsPage];
            screens.forEach(screen => {
                screen.classList.add('hidden-screen');
            });

            const targetScreen = document.getElementById(screenId);
            if (targetScreen) { 
                targetScreen.classList.remove('hidden-screen');
                targetScreen.scrollIntoView({behavior:'smooth', block: 'start'});
            }
        }

        function loadGame(difficultyId) {
            const version = versions[difficultyId];
            if (!version) { 
                console.error("Error: Difficulty not found: ", difficultyId);
                scenarioDescriptionDisplay.innerHTML = `<p>Error! Could not load the next part of the story. Please restart the game from the menu.</p>`;
                return;
            }

            currentDifficultyId = difficultyId;
            currentGameId++;
            showScreen('game-page');
        }

        function displayResults(action) { 
            const game = games[currentGameId];
            showScreen('results-page');
        }

        // Function to enable all action buttons
        function enableButtons() {
            buttons.forEach(button => {
                button.disabled = false;
            });
        }

        // Function to disable all action buttons
        function disableButtons() {
            buttons.forEach(button => {
                button.disabled = true;
            });
        }

        // Function to reset the game (full restart from landing page)
        function resetGame() {
            currentScenarioId = null;
            gameActive = false;
            currentPartNumber = 0; // Reset part number
            showScreen('landing-page');
        }

        // Menu Modal Logic
        menuButtonLanding.addEventListener('click', () => {
            menuModal.style.display = 'flex';
            populateMenuNavigation(); // Populate navigation links
            populateScenarioList(); // Populate scenario links
        });
        menuButtonSelection.addEventListener('click', () => {
            menuModal.style.display = 'flex';
            populateMenuNavigation(); // Populate navigation links
            populateScenarioList(); // Populate scenario links
        });
        menuButtonGame.addEventListener('click', () => {
            menuModal.style.display = 'flex';
            populateMenuNavigation(); // Populate navigation links
            populateScenarioList(); // Populate scenario links
        });

        menuModalCloseButton.addEventListener('click', () => {
            menuModal.style.display = 'none';
        });


        function populateMenuNavigation() {
            menuNavList.innerHTML = ''; // Clear existing navigation list

            const homeItem = document.createElement('li');
            const homeLink = document.createElement('a');
            homeLink.href = '#top-of-page'; // Anchor link to the top of the landing page
            homeLink.textContent = 'Home (Landing Page)';
            homeLink.addEventListener('click', (e) => {
                e.preventDefault();
                menuModal.style.display = 'none';
                showScreen('landing-page');
                // Use smooth scroll to top of the page after showing it
                document.getElementById('top-of-page').scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            homeItem.appendChild(homeLink);
            menuNavList.appendChild(homeItem);

            const newGameItem = document.createElement('li');
            const newGameLink = document.createElement('a');
            newGameLink.href = '#';
            newGameLink.textContent = 'Start New Game (Difficulty Selection)';
            newGameLink.addEventListener('click', (e) => {
                e.preventDefault();
                menuModal.style.display = 'none';
                showScreen('difficulty-selection-page');
            });
            newGameItem.appendChild(newGameLink);
            menuNavList.appendChild(newGameItem);
        }

        function populateDifficultyList() {
            difficultyList.innerHTML = '';
            const initialDifficultyOptions = [
                {id: 'easy', text: '30 profiles in 2 minutes'},
                {id: 'medium', text: '30 profiles in 1 minute'},
                {id: 'hard', text: '30 profiles in 30 seconds'}
            ];

            initialDifficultyOptions.forEach(option => {
                const listItem = document.createElement('li');
                const link = document.createElement('a');
                link.href = '#';
                link.textContent = option.text;
                link.dataset.scenarioId = option.id;
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    menuModal.style.display = 'none';
                    currentPartNumber = 0; // Reset part number for a new scenario start
                    loadScenario(option.id); // Load selected scenario
                });
                listItem.appendChild(link);
                scenarioList.appendChild(listItem);
            });
        }
        // Buttons
        buttons.forEach(button => {
            button.addEventListener('mouseenter', () => {
                hoverSound.currentTime = 0; // Rewind to start
                hoverSound.play().catch(e => console.log("Hover audio play failed:", e)); // Play and catch potential errors
            });
            button.addEventListener('click', (event) => {
                clickSound.currentTime = 0; // Rewind to start
                clickSound.play().catch(e => console.log("Click audio play failed:", e)); // Play and catch potential errors

                if (gameActive) {
                    const action = event.target.closest('.btn')?.dataset.action;
                }
            });
        });

        // Event listener for Start Game button
        startGameButton.addEventListener('click', () => {
            populateDifficultyList(); 
            showScreen('difficulty-selection-page');                    // Ensure scenario list is populated for menu
        });

        difficultySelectButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const gameId = event.target.dataset.
                loadGame(gameId)
            });
        })

        // Initial game load: show landing page
        window.onload = () => {
            showScreen('landing-page');
            
            // Ensure navigation links are populated on load for the menu
            populateMenuNavigation();
            populateDifficultyList();
        };
    </script>
</body>
</html>